###############################################################################
#                                                                             #
# IAR C/C++ Compiler V1.31.1.20058 [Evaluation] for STM830/Mar/2016  14:30:32 #
# Copyright 2010-2012 IAR Systems AB.                                         #
#                                                                             #
#    Source file  =  D:\ProjectPath\GitPath\CH79_A0\sys\src\main.c            #
#    Command line =  D:\ProjectPath\GitPath\CH79_A0\sys\src\main.c -e -Ohz    #
#                    --debug --code_model small --data_model medium -o        #
#                    D:\ProjectPath\GitPath\CH79_A0\Debug\Obj\ --dlib_config  #
#                    "C:\Program Files\IAR Systems\Embedded Workbench 6.0     #
#                    Evaluation\stm8\LIB\dlstm8smn.h" -lcN                    #
#                    D:\ProjectPath\GitPath\CH79_A0\Debug\List\ -I            #
#                    D:\ProjectPath\GitPath\CH79_A0/user/\ -I                 #
#                    D:\ProjectPath\GitPath\CH79_A0/user/src/\ -I             #
#                    D:\ProjectPath\GitPath\CH79_A0/user/inc/\ -I             #
#                    D:\ProjectPath\GitPath\CH79_A0/addon/\ -I                #
#                    D:\ProjectPath\GitPath\CH79_A0/addon/src/\ -I            #
#                    D:\ProjectPath\GitPath\CH79_A0/addon/inc/\ -I            #
#                    D:\ProjectPath\GitPath\CH79_A0/sys/\ -I                  #
#                    D:\ProjectPath\GitPath\CH79_A0/sys/inc/\ -I              #
#                    D:\ProjectPath\GitPath\CH79_A0/sys/src/\ -I              #
#                    D:\ProjectPath\GitPath\CH79_A0/lib/\ -I                  #
#                    D:\ProjectPath\GitPath\CH79_A0/lib/src/\ -I              #
#                    D:\ProjectPath\GitPath\CH79_A0/lib/inc/\ --vregs 16      #
#    List file    =  D:\ProjectPath\GitPath\CH79_A0\Debug\List\main.lst       #
#    Object file  =  D:\ProjectPath\GitPath\CH79_A0\Debug\Obj\main.o          #
#                                                                             #
#                                                                             #
###############################################################################

D:\ProjectPath\GitPath\CH79_A0\sys\src\main.c
      1          //===2016-03-25pm
      2          #include "stm8s.h"  
      3          #include "user.h"  
      4          #include "macro_def.h"  
      5          #include "iostm8s003f3.h"  
      6          #include "bq769x0.h"  
      7          void main(void)  
      8          {  
      9            uint8_t i = 0;
     10            //-----------------------------
     11            disableInterrupts();
     12            SysInit(); 
     13            PortInit(); 
     14            LED1_ON();  
     15            I2C_Model_Init();
     16            //Uart_Model_Init();
     17            Var_Init();
     18            VCC1_ON();
     19            Timer2Init();
     20            enableInterrupts();  
     21            Delay_ms(50);    
     22            Afe_Device_Init();
     23            Soc_OCV_CorrectEn_Flag  = 1; 
     24            LowPower_MCU_Entry_Flag = 0; 
     25            LED1_OFF();  
     26            //Afe_ADC_Disable();  //100+uA
     27            //Afe_Temp_Disable(); //100+uA
     28            while(1)
     29            {
     30              ClrWdt();   
     31              if(LowPower_MCU_Entry_Flag == 0)
     32              { 
     33                Afe_Get_SysStatus(); 
     34                
     35                /*  
     36                Uart_SendStr("\r\n SYS_STAT= ");  Uart_SendData(SYS_STAT.Byte,16); 
     37                Uart_SendStr(" SYS_CTRL1 = ");    Uart_SendData(SYS_CTRL1.Byte,16); 
     38                Uart_SendStr(" SYS_CTRL2 = ");    Uart_SendData(SYS_CTRL2.Byte,16);  
     39                 */
     40                ModeCheck(); 
     41                
     42                ClearStatus();
     43                
     44                Afe_Volt_Val_Get();
     45                
     46                CurrentCheck();
     47                
     48                VoltCheck();
     49                
     50                TempCheck();
     51                
     52                CellBal_Cntrl();
     53                
     54                Afe_FET_ChgDis_Cntrl();
     55                
     56                Afe_AbnormalCheck();
     57                
     58                LedShow_Cntrl();     //LedShow_WorkMode();   // 
     59                /*    
     60                Uart_SendStr(" WorkMode= ");      Uart_SendData(WorkMode,16); 
     61                Uart_SendStr(" Bits_flag = ");    Uart_SendData(Bits_flag.Byte,16); 
     62                
     63                Uart_SendStr(" Current_Val= ");   Uart_SendData((uint16_t)Current_Val,10);
     64                Uart_SendStr(" Volt_Avg= ");      Uart_SendData(Cell_Volt_Avg,10); 
     65                Uart_SendStr(" Max= ");           Uart_SendData(Cell_Volt_Max,10);
     66                Uart_SendStr(" Min= ");           Uart_SendData(Cell_Volt_Min,10);
     67                 
     68                Uart_SendStr(" soc_rt= ");        Uart_SendData((uint16_t)SocCalc.soc_rt,10); 
     69                Uart_SendStr(" ah= ");            Uart_SendData((uint16_t)SocReg.ah,10);
     70                Uart_SendStr(" CellBal= ");       Uart_SendData((uint16_t)CellBalance_Selct,16);  
     71                
     72                Uart_SendStr("\r\n");
     73                for(i =0;i<10;i++)
     74                { 
     75                  Uart_SendStr(" C_");
     76                  Uart_SendData(i,10);  
     77                  Uart_SendStr("= ");
     78                  Uart_SendData(Cell_Volt[i],10);
     79                }
     80          
     81                Uart_SendStr("\r\n");*/ 
     82             
     83              }
     84              LowPower_Cntrl();
     85            }    
     86           
     87          }
     88           
     89          
     90          
     91          
     92          
     93          
     94          
     95          
     96          
     97          
     98          
     99          
    100          
    101          

   Section sizes:

     Function/Label Bytes
     -------------- -----
     _A_PA_ODR         1
     _A_PC_ODR         1
     main             92

 
  2 bytes in section .near.noinit
 92 bytes in section .near_func.text
 
 92 bytes of CODE memory
  0 bytes of DATA memory (+ 2 bytes shared)

Errors: none
Warnings: 1
